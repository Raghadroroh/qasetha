# معالج زر الرجوع العالمي في تطبيق قسطها

## نظرة عامة

يوفر هذا الحل معالجة موحدة لزر الرجوع في جميع أنحاء التطبيق، مما يضمن تجربة مستخدم متسقة وسلسة. يعمل مع زر الرجوع الفعلي في الأجهزة وأزرار الرجوع البرمجية في واجهة المستخدم.

## الميزات الرئيسية

- **معالجة عالمية**: يعمل تلقائيًا في جميع الشاشات دون الحاجة لإضافة كود إضافي
- **تأكيد الخروج**: يعرض مربع حوار للتأكيد قبل الخروج من التطبيق عند الضغط على زر الرجوع في الشاشة الرئيسية
- **دعم متعدد اللغات**: يدعم اللغتين العربية والإنجليزية مع اتجاهات النص المناسبة (RTL و LTR)
- **مستقبلي**: أي شاشات جديدة تضاف للتطبيق ستستفيد تلقائيًا من هذه الوظيفة

## كيفية العمل

1. **التقاط زر الرجوع**: يستخدم `PopScope` لالتقاط أحداث زر الرجوع
2. **التحقق من إمكانية الرجوع**: يتحقق من `Navigator.canPop()` لمعرفة ما إذا كان هناك شاشات سابقة
3. **الرجوع التلقائي**: إذا كانت هناك شاشات سابقة، يتم الرجوع إليها تلقائيًا
4. **تأكيد الخروج**: إذا كنا في الشاشة الرئيسية، يتم عرض مربع حوار للتأكيد قبل الخروج

## التنفيذ

تم تنفيذ الحل باستخدام:

- `GlobalBackHandler`: مكون يغلف التطبيق بأكمله ويتعامل مع أحداث زر الرجوع
- تكامل مع `MaterialApp` باستخدام خاصية `builder` لضمان التطبيق العالمي
- دعم للغتين العربية والإنجليزية مع اتجاهات النص المناسبة

## ملاحظات مهمة

- لا تحتاج إلى إضافة `PopScope` أو `WillPopScope` في الشاشات الفردية
- الحل يعمل تلقائيًا مع جميع الشاشات الحالية والمستقبلية
- يمكن تخصيص رسائل التأكيد ومظهر مربع الحوار حسب الحاجة